<!DOCTYPE html> <!-- defines that this document is an HTML5 document -->
<!-- Comment. It may span multiple lines -->

<html>
<!-- the root element of an HTML page -->

<head>
    <!-- contains meta information about the HTML page -->
    <title>New Order</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/JavaScript">
            async function placeOrder() {
                
                const data={
                    size: document.querySelector('input[name="size"]:checked').value,
                    color: document.querySelector('input[name="color"]:checked').value,
                    option1: $('#option1').is(':checked'),
                    option2: $('#option2').is(':checked'),
                    option3: $('#option3').is(':checked')
                };    

                let response = await fetch("/orders",  {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    
                if (response.ok) { // if HTTP-status is 200-299
                    // get the response body (the method explained below)
                    let json = await response.json()
                    console.log(json)
                    window.location.href='orders.html'
                } else {
                    alert("HTTP-Error: " + response.status)
                    console.log(response.status)
                    let json = await response.json()
                    console.log(json)
                }
            }

            async function logOut() {
                let response = await fetch("/auth/",  {
                    method: 'DELETE'
                })
                if (response.ok) { // if HTTP-status is 200-299
                    // get the response body (the method explained below)
                    let json = await response.json()
                    console.log(json)
                    window.location.href='signin.html'

                } else {
                    alert("HTTP-Error: " + response.status)
                    console.log(response.status)
                    let json = await response.json()
                    console.log(json)
                }
            }
            $(document).ready(function(){
                $("#placeOrder").click(placeOrder)
                $("#logOut").click(logOut)
            })

        </script>

</head>

<body>
    <!-- defines the document's body, and is a container for all the visible contents -->

    <h1>Create Your Order</h1>
    <div id="container">
        <h2>Size: </h2>
        <ul style="list-style-type: none;">
            <li><input type="radio" name="size" value="small" checked="checked">Small</li>
            <li><input type="radio" name="size" value="medium">Medium</li>
            <li><input type="radio" name="size" value="medium">Large</li>
        </ul>
        <h2>Color: </h2>
        <ul style="list-style-type: none;">
            <li><input type="radio" name="color" value="red" checked="checked">Red</li>
            <li><input type="radio" name="color" value="green">Green</li>
            <li><input type="radio" name="color" value="blue">Blue</li>
        </ul>
        <h2>Options: </h2>
        <ul style="list-style-type: none;">
            <li><input type="checkbox" id="option1">Option 1</li>
            <li><input type="checkbox" id="option2">Option 2</li>
            <li><input type="checkbox" id="option3">Option 3</li>
        </ul>
    </div>

    <button type="button" id="placeOrder">Place Order</button>
    <button type="button" id="logOut">Log Out</button>

</body>

</html>