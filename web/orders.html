<!DOCTYPE html> <!-- defines that this document is an HTML5 document -->
<!-- Comment. It may span multiple lines -->

<html>
<!-- the root element of an HTML page -->

<head>
    <!-- contains meta information about the HTML page -->
    <title>Display Orders</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/JavaScript">
            window.onload=displayOrders;
                async function displayOrders() {
                let response = await fetch("/orders",  {
                    method: 'GET',
                })
                    
                if (response.ok) { // if HTTP-status is 200-299
                    // get the response body (the method explained below)
                    let json = await response.json()
                    console.log(json)
                    if(json.orders.length===0){
                        $("#container").append('<li>No Order</li>')
                    }else{
                        let counter=0;
                        json.orders.forEach(element => {
                            counter ++;
                            var size = element.my_size;
                            var color = element.my_color;
                            var option1 = element.option1;
                            var option2 = element.option2;
                            var option3 = element.option3;
                            $("#container").append(`<ul><li> Order #${counter} :
                                Size: ${size},
                                Color: ${color},  
                                Option1: ${option1},
                                Option2: ${option2},
                                Option3: ${option3}</li></ul>`)
                            
                        });
                    }
                } else {
                    alert("HTTP-Error: " + response.status)
                    console.log(response.status)
                    let json = await response.json()
                    console.log(json)
                }
            }

            async function logOut() {
                let response = await fetch("/auth/",  {
                    method: 'DELETE'
                })
                if (response.ok) { // if HTTP-status is 200-299
                    // get the response body (the method explained below)
                    let json = await response.json()
                    console.log(json)
                    window.location.href='signin.html'

                } else {
                    alert("HTTP-Error: " + response.status)
                    console.log(response.status)
                    let json = await response.json()
                    console.log(json)
                }
            }
            $(document).ready(function(){
                $("#backToOrder").click(()=> window.location="place.html")
                $("#logOut").click(logOut)
            })

        </script>

</head>

<body>
    <!-- defines the document's body, and is a container for all the visible contents -->

    <h1>Orders</h1>
    <div id="container">
    </div>

    <button type="button" id="backToOrder">New Order</button>
    <button type="button" id="logOut">Log Out</button>

</body>

</html>